import NodeCache from "node-cache";
import db from "../dataBase.js";
import getCacheSettings from "./cacheSettings.js";
const cache = new NodeCache(getCacheSettings("UserOnRealm"));
export async function checkIsUserOnRealm(userId, realm) {
    if (cache.has(`${userId}:${realm}`))
        return cache.get(`${userId}:${realm}`);
    const result = await db.realmUser.findOne(realm, { u: userId });
    cache.set(`${userId}:${realm}`, !!result);
    return !!result;
}
export function clearCache(userId, realm) {
    cache.del(`${userId}:${realm}`);
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2hlY2tJc1VzZXJPblJlYWxtLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vYmFjay9sb2dpYy9jaGVja0lzVXNlck9uUmVhbG0udHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxTQUFTLE1BQU0sWUFBWSxDQUFDO0FBRW5DLE9BQU8sRUFBRSxNQUFNLEtBQUssQ0FBQztBQUVyQixPQUFPLGdCQUFnQixNQUFNLGlCQUFpQixDQUFDO0FBRS9DLE1BQU0sS0FBSyxHQUFHLElBQUksU0FBUyxDQUFDLGdCQUFnQixDQUFDLGFBQWEsQ0FBQyxDQUFDLENBQUM7QUFFN0QsTUFBTSxDQUFDLEtBQUssVUFBVSxrQkFBa0IsQ0FBQyxNQUFVLEVBQUUsS0FBUztJQUMxRCxJQUFHLEtBQUssQ0FBQyxHQUFHLENBQUMsR0FBRyxNQUFNLElBQUksS0FBSyxFQUFFLENBQUM7UUFBRSxPQUFPLEtBQUssQ0FBQyxHQUFHLENBQVUsR0FBRyxNQUFNLElBQUksS0FBSyxFQUFFLENBQUMsQ0FBQztJQUVwRixNQUFNLE1BQU0sR0FBRyxNQUFNLEVBQUUsQ0FBQyxTQUFTLENBQUMsT0FBTyxDQUFvQixLQUFLLEVBQUUsRUFBRSxDQUFDLEVBQUUsTUFBTSxFQUFFLENBQUMsQ0FBQztJQUNuRixLQUFLLENBQUMsR0FBRyxDQUFDLEdBQUcsTUFBTSxJQUFJLEtBQUssRUFBRSxFQUFFLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQztJQUMxQyxPQUFPLENBQUMsQ0FBQyxNQUFNLENBQUM7QUFDcEIsQ0FBQztBQUVELE1BQU0sVUFBVSxVQUFVLENBQUMsTUFBVSxFQUFFLEtBQVM7SUFDNUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxHQUFHLE1BQU0sSUFBSSxLQUFLLEVBQUUsQ0FBQyxDQUFDO0FBQ3BDLENBQUMifQ==